<div class="overlayAnimal" *ngIf="cargoPagina==false; else elseBlock">
  <div class="rot1">
    <div class="paw">
      <div class="inner"></div>
      <div class="bottom"></div>
    </div>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="rot2">
    <div class="paw">
      <div class="inner"></div>
      <div class="bottom"></div>
    </div>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <div class="rot3">
    <div class="paw">
      <div class="inner"></div>
      <div class="bottom"></div>
    </div>
  </div>


  <!-- <div class="lds-heart"><div></div></div> -->
</div>
<ng-template #elseBlock>

  <!--
    la idea es que se vea el contenido solo cuando termine de cargar todo
  -->


  <!-- COMIENZA EL GRID-->
  <div class="grid-container">

    <!-- GRID HEADER-->
    <div class="grid-item grid-header">
      <div class="animal-imagen">
        <h1 class="animal-nombre">{{Animal.nombre}}</h1>
        <div class="imagenC">
          <app-upload-list [sujetoID]='AnimalID.id' [Pertenece]='ubi'> </app-upload-list>
          <ng-container *ngIf="Animal.idDador ===  UsuarioID.user">
            <label for="file-upload" class="subir">
              <i class="fas fa-camera" id="subir-foto"></i>
            </label>
            <input id="file-upload" onchange='cambiar()' type="file" accept=".jpeg" style='display: none;'/>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- GRID SUBHEADER-->
    <div class="grid-item grid-subheader">

      <div class="animal-subheader">
        <ul class="nav nav-tabs nav-fill" role="tablist">

          <li class="nav-item activecol-lg-4" role="presentation" *ngIf="Animal.idDador!= UsuarioID.user; else dador">
            <button class="nav-link" type="button" role="tab"
              [ngClass]="interes ? 'interesMostrado' : 'interesMostrar' " (click)="mostrarInteres()">
              <p class="interes-mostrado-text" *ngIf="interes==true"><i class="fas fa-check"></i> Interes Mostrado</p>
              <p class="mostrar-interes-text" *ngIf="interes==false"> Mostrar Interes </p>

            </button>
          </li>


          <ng-template #dador>
            <li class="nav-item activecol-lg-4" role="presentation">
              <div class="dropdown">
                <div class="nav-link" role="tab" class="btn btn - btnInteresados"
                  (click)="isOpenInteresados = !isOpenInteresados">
                  <span> Interesados </span><i [ngClass]="{'gg-chevron-down': isOpenInteresados} "></i>
                </div>
                <div [@clickContent]="isOpenInteresados ? 'show' : 'noShow'" class="interesados-dropdown-content">
                  <div class="interesados-item">
                    <div *ngIf="interesados.length>0; else vacio">
                      <div class="interesado-data" *ngFor=" let interesado of interesados">
                        <!--
                        La idea seria poner la foto de perfil (Redirecciona al perfil del usuario),
                        el nombre y apellido de los interesados (Abre model q pregunta si quiere iniciar chat)
                        -->
                        <a class="imagen-interesado" (click)="irAInteresado(interesado.id)">
                          <img src="https://ligacanceratlantico.com/wp-content/uploads/2017/11/b1-8.jpg">
                        </a>
                        <a
                          (click)="comenzarChat(interesado.id, interesado.nombre, interesado.apellido, interesado.nro_celular)">{{interesado.nombre}}
                          {{interesado.apellido}}</a>
                      </div>
                    </div>


                    <ng-template #vacio>
                      <div style="text-align: center;">
                        <br>No hay interesados
                      </div>
                    </ng-template>

                  </div>
                </div>
              </div>

            </li>
          </ng-template>

          <li class="nav-item" role="presentation">

            <button id="boton-dador" role="tab" class="nav-link col-lg-4 float-right" type="button"
              (click)="irADador()">

              <div class="patita-dador">
                <div class="paw">
                  <div class="inner"></div>
                  <div class="bottom"></div>
                </div>
              </div>

              <p class="dador-text">Dador</p>

            </button>
          </li>
        </ul>
      </div>

    </div>

    <!-- GRID ANIMALMAIN-->
    <div class="grid-item grid-animalMain">
      <div class="animal-main">
        <div class="grid-main-item animal-datos">
          <div class="data-item data-1">
            <span class="span-1" data-title="Nombre:">Nombre:</span> {{Animal.nombre}}
          </div>

          <div class="data-item data-2">
            <span class="span-1" data-title="Tipo:">Tipo:</span> {{Animal.tipo}}
          </div>
          <div class="data-item data-1">
            <span class="span-1" data-title="Sexo:">Sexo:</span> {{Animal.sexo}}
          </div>
          <div class="data-item data-2">
            <span class="span-1" data-title="Nacimiento:">Nacimiento:</span> {{Animal.fNac | date: 'dd/MM/yyyy'}}
          </div>
          <div class="data-item data-1">
            <span class="span-1" data-title="Tamaño:">Tamaño:</span> {{Animal.tamano}}
          </div>
          <div class="data-item data-2">
            <span class="span-1" data-title="Peso:">Peso:</span> {{Animal.peso}} KG
          </div>

          <div class="data-estado">

            <b>Estado de adopcion: &nbsp;&nbsp; </b>
            <a [ngClass]="{'botonEstado' : estadoDelAnimal.estado === 'Disponible' , 'botonEstadoPendiente': estadoDelAnimal.estado === 'Pendiente', 'botonEstadoAdoptado': estadoDelAnimal.estado === 'Adoptado'}"
              (click)="abrirDisponibleYPendiente()">{{estadoDelAnimal.estado}}</a>
          </div>
        </div>

        <ng-container *ngIf="Animal.idDador ===  UsuarioID.user; else noEsDador">
          <div class="grid-main-item datos-medicos">
            <div class="btn-group" role="group">
              <button type="button" class="btn btn - botonDatosMedicos" (click)="openModal()"> <b> Datos Medicos </b></button>
            </div>
            <button type="button" class="btn btn-light botonDatosMedicos" data-bs-toggle="modal"
              data-bs-target="#exampleModal2"> <b>Editar datos <i class="fas fa-pencil-alt"></i> </b> </button>
          </div>
        </ng-container>
        <ng-template #noEsDador>
          <div>
            <button type="button" class="btn btn - botonDatosMedicos" (click)="openModal()" style="float: right;"><b> Datos Medicos </b></button>

          </div>
        </ng-template>

        <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel2"
          aria-hidden="true">
          <!-- Empieza Modal de Modificar -->
          <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h2 id="exampleModalLabel2">Modifica los datos de {{Animal.nombre}}</h2>
                <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-light ">
                  <i class="fas fa-times"></i></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <div class="card-body">
                    <form>
                      <div class="mb-3">
                        <label> <b> Nombre</b> </label>
                        <input type="text" name="nombre" [(ngModel)]="datosNuevos.nombre" placeholder="Ingrese el nombre" class="form-control" autofocus
                          required value="{{Animal.nombre}}">
                      </div>
                      <div class="mb-3">
                        <div class="content-select">
                          <label> <b> Tipo</b> </label>
                          <select name="tipo" class="form-control">
                            <ng-container *ngIf="Animal.tipo === 'perro'; else tipoTemplate">
                              <option [(ngModel)]="datosNuevos.tipo" value="perro" selected>Perro</option>
                              <option [(ngModel)]="datosNuevos.tipo" value="gato">Gato</option>
                            </ng-container>
                            <ng-template #tipoTemplate>
                              <option [(ngModel)]="datosNuevos.tipo" value="perro">Perro</option>
                              <option [(ngModel)]="datosNuevos.tipo" value="gato" selected>Gato</option>
                            </ng-template>
                          </select>
                        </div>
                      </div>
                      <div class="mb-3">
                        <div class="content-select">
                          <label> <b> Sexo</b> </label>
                          <select name="sexo" class="form-control">
                            <ng-container *ngIf="Animal.sexo === 'hembra'; else sexoTemplate">
                              <option [(ngModel)]="datosNuevos.sexo" value="macho">Macho</option>
                              <option [(ngModel)]="datosNuevos.sexo" value="hembra" selected>Hembra</option>
                            </ng-container>
                            <ng-template #sexoTemplate>
                              <option [(ngModel)]="datosNuevos.sexo" value="macho" selected>Macho</option>
                              <option [(ngModel)]="datosNuevos.sexo" value="hembra">Hembra</option>
                            </ng-template>
                          </select>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label> <b> Fecha de nacimiento</b> </label>
                        <input type="date" name="fNac" class="form-control" required 
                        [(ngModel)]="datosNuevos.fNac" value="{{Animal.fNac}}">
                      </div>
                      <div class="mb-3">
                        <div class="content-select">
                          <label> <b> Tamaño</b> </label>
                          <select name="tamano" class="form-control">
                            <ng-container *ngIf="Animal.tamano === 'chico'">
                              <option [(ngModel)]="datosNuevos.tamano" value="chico" selected>Chico</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="mediano">Mediano</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="grande">Grande</option>
                            </ng-container>
                            <ng-container *ngIf="Animal.tamano === 'mediano'">
                              <option [(ngModel)]="datosNuevos.tamano" value="chico">Chico</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="mediano" selected>Mediano</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="grande">Grande</option>
                            </ng-container>
                            <ng-container *ngIf="Animal.tamano === 'grande'">
                              <option [(ngModel)]="datosNuevos.tamano" value="chico">Chico</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="mediano">Mediano</option>
                              <option [(ngModel)]="datosNuevos.tamano" value="grande" selected>Grande</option>
                            </ng-container>
                          </select>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label> <b> Peso (KG)</b> </label>
                        <input type="number" name="peso" placeholder="Ingrese el peso" class="form-control" required
                        [(ngModel)]="datosNuevos.peso" value="{{Animal.peso}}">
                      </div>
                      <br>
                      <div class="mb-3">
                        <button type="reset" class="btn btn-danger btn-lg" style="float: left;"> <b> Limpiar
                            campos</b> </button>
                        <button class="btn btn-success btn-lg" style="float: right;"
                          data-bs-dismiss="modal" (click)="modificarDatosAnimal(datosNuevos)">
                          <b>Confirmar </b> <i class="fas fa-check-double"></i></button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- Termina Modal -->

        <div class="modal-dialog modal-dialog-scrollable">
          <div class="backdrop" id="modal-datos-medicos" [ngStyle]="{'display':display}"></div>
          <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display}">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h2 class="modal-title">Datos Medicos de {{Animal.nombre}} </h2>
                  <button type="button" class="close" aria-label="Close" (click)="onCloseHandled()"
                    style="font-size: 40px;"><span aria-hidden="true"><i
                        class="fas fa-times-circle"></i></span></button>
                </div>
                <div class="modal-body">
                  <ng-container *ngIf="Animal.idDador !=  UsuarioID.user; else puedeEditar">
                    <ul class="list-group">
                      <label for=""> Vacunas</label>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Moquiillo; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked disabled>
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            disabled>
                        </ng-template>
                        <span id="text-check"> <b>Moquillo </b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Primovacunacion === 1; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            aria-readonly="true" checked disabled>
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            aria-readonly="true" disabled>
                        </ng-template>
                        <span id="text-check"> <b>Primovacunacion</b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Polivalente === 1; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked disabled>
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            disabled>
                        </ng-template>
                        <span id="text-check"> <b>Polivalente </b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Rabia; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked disabled>
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            disabled>
                        </ng-template>
                        <span id="text-check"> <b>Rabia </b> </span>
                      </li>
                    </ul>
                    <label> Castrado</label><br>
                    <ng-container *ngIf="vacuna.Castrado">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                          value="option1" checked>
                        <label class="form-check-label" for="inlineRadio1" id="text-radio"> Si</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                          value="option2" disabled>
                        <label class="form-check-label" for="inlineRadio2" id="text-radio"> No</label>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="vacuna.Castrado != 1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                          value="option1" disabled>
                        <label class="form-check-label" for="inlineRadio1" id="text-radio">Si</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                          value="option2" checked>
                        <label class="form-check-label" for="inlineRadio2" id="text-radio">No</label>
                      </div>
                    </ng-container>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-dark" (click)="onCloseHandled()"
                        id="btn-cerrar-datos-medicos">Cerrar</button>
                    </div>
                  </ng-container>

                  <ng-template #puedeEditar>

                    <ul class="list-group">
                      <label for=""> Vacunas</label>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Moquiillo; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked >
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            >
                        </ng-template>
                        <span id="text-check"> <b>Moquillo </b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Primovacunacion === 1; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            aria-readonly="true" checked >
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            aria-readonly="true" >
                        </ng-template>
                        <span id="text-check"> <b>Primovacunacion</b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Polivalente === 1; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked >
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            >
                        </ng-template>
                        <span id="text-check"> <b>Polivalente </b> </span>
                      </li>
                      <li class="list-group-item">
                        <ng-container *ngIf="vacuna.Rabia; else elseTemplate">
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            checked >
                        </ng-container>
                        <ng-template #elseTemplate>
                          <input class="form-check-input me-1" type="checkbox" value="" aria-label="..." id="tamano-check"
                            >
                        </ng-template>
                        <span id="text-check"> <b>Rabia </b> </span>
                      </li>
                    </ul>
                    <label> Castrado</label><br>
                    <ng-container *ngIf="vacuna.Castrado">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                          value="option1" checked>
                        <label class="form-check-label" for="inlineRadio1" id="text-radio"> Si</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                          value="option2" >
                        <label class="form-check-label" for="inlineRadio2" id="text-radio"> No</label>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="vacuna.Castrado != 1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                          value="option1" >
                        <label class="form-check-label" for="inlineRadio1" id="text-radio">Si</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                          value="option2" checked>
                        <label class="form-check-label" for="inlineRadio2" id="text-radio">No</label>
                      </div>
                    </ng-container>
                    <div class="modal-footer">
                      <div class="form-group row">
                        <div class="col-sm-12">
                          <button type="button" class="btn btn-danger" id="btn-editar-datos-medicos"
                            style="float: left !important;" (click)="onCloseHandled()"> <b>Cancelar </b></button>
                          <button type="button" class="btn btn-success" id="btn-editar-datos-medicos"
                            style="float: right !important;"> <b>Confirmar cambios </b><i
                              class="fas fa-check-double"></i></button>
                        </div>
                      </div>

                      <!-- <button type="button" class="btn btn-dark" (click)="onCloseHandled()" id="btn-cerrar-datos-medicos">Cerrar</button> -->
                    </div>

                  </ng-template>

                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal !-->
        </div>

      </div>
    </div>

    <!-- GRID FOOTER-->
    <div class="grid-item grid-footer">

    </div>
  </div>





  <!-- NO ES DEL GRID ANTERIOR, ES EL CHAT  -->
  <div class="chat" *ngIf="chatAbierto==true">
    <div class="chat-item chat-header">
      <a class="interesado-seleccionado-img">
        <img src="https://ligacanceratlantico.com/wp-content/uploads/2017/11/b1-8.jpg">
      </a>
      <a>{{seleccionadoName}} {{seleccionadoApellido}}</a>
      <button type="button" class="btn btn-cerrarChat" (click)="cerrarChat()">&#10006;</button>
    </div>
    <div class="chat-item chat-main">
      <p> ¿Comenzar a chatear? </p>
      <div class="chat-resp" (click)="abrirWhats()">
        <img class="chat-si" src="../assets/img/whatsapp-logo-11.png" alt="imagen whatsapp">
      </div>
    </div>

    <!-- <div class="chat-item chat-aside"></div>  -->
  </div>


  <!--  ES EL MODAL DE ELECCION   *ngIf="modalEleccionAbierto==true" -->
  <div class="overlay-eleccion-adoptante" *ngIf="modalEleccionAbierto==true && Animal.idDador==userAhora">
    <div class="modal-eleccion-adoptante">
      <div class="eleccion-item eleccion-header">
        <button type="button" class="btn btn-cerrarModalX" (click)="cerrarModalDisponibleYPendiente()">&#10006;</button>
        <p>Elija al adoptante final</p>
      </div>
      <div class="eleccion-item eleccion-main">
        <div class="adoptante-a-seleccionar" *ngFor=" let adoptante of interesados">
          <div class="adoptante-data">
            <img src="https://ligacanceratlantico.com/wp-content/uploads/2017/11/b1-8.jpg">
            <div class="adoptante-nombre">{{adoptante.nombre}} {{adoptante.apellido}}</div>
            <div class="elejir-adoptante"
              (click)="abirConfirmarAdopcion(adoptante.nombre,adoptante.apellido,adoptante.id)">
              <p>Elejir Adoptante</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal confirmar adopcion  -->

  <div class="overlay-confirmar-adopcion"
    *ngIf="modalConfirmarAdopcionAbierto==true && Animal.idDador==userAhora">
    <div class="modal-confirmar-adopcion">
      <div class="confirmar-head">
        <p>¿Seguro quiere darle su animal en adopcion a {{interesadoSeleccionado.nombre}}
          {{interesadoSeleccionado.apellido}}?</p>
      </div>

      <div class="confirmar-main">
        <a class="btn-confirmar" (click)="confirmarAdopcion(interesadoSeleccionado.id)">
          Confirmar
        </a>
        <a class="btn-cancelar" (click)="cerrarModalConfirmarAdopcion()">
          Cancelar
        </a>
      </div>
    </div>
  </div>

  <!-- Modal adopcion pendiente  -->
  <div class="overlay-adopcion-pendiente"
    *ngIf="modalAdopcionPendienteAbierto==true && Animal.idDador==userAhora">

    <div class="modal-adopcion-pendiente">

      <div class="pendiente-head">
        <button type="button" class="btn btn-cerrarModalX" (click)="cerrarModalDisponibleYPendiente()">&#10006;</button>
        <p>Proceso de adopcion en espera de la aceptacion del interesado seleccionado</p>
      </div>

      <div class="pendiente-main">
        <a class="btn-cancelar-proceso" (click)="cancelarProcesoAdopcion()">
          Cancelar proceso
        </a>
      </div>
    </div>
  </div>

  <!--
    Este es el template de la carga
    El contenido va arriba
  -->

</ng-template>
